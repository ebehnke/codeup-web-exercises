<!DOCTYPE html>
<html>
<head>
    <title>Online Store</title>
    <style>
        * {
            border: 2px solid gray;
            margin: 3px;
        }
    </style>
</head>
<body>

<h1>My Tool Store</h1>

<table id="products">
    <thead>
        <tr>
            <th>Title</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Categories</th>
        </tr>
    </thead>
    <tbody id="insertProducts"></tbody>
</table>
<br>
<!--<form id="postForm" action="data/inventory.json">-->
    <!--<input type="text" id="title" placeholder="Title">-->
    <!--<br>-->
    <!--<input type="text" id="quantity" placeholder="Quantity">-->
    <!--<br>-->
    <!--<input type="text" id="price" placeholder="Price">-->
    <!--<br>-->
    <!--<input type="text" id="category" placeholder="Category">-->
    <!--<br>-->
    <!--<input type="submit" value="Submit">-->
<!--</form>-->

<button type="button" id="refresh">Refresh</button>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script>
    "use strict";
    // Add a "Refresh" button that will load inventory.json for you without having to refresh the entire page.

    // Add Twitter Bootstrap to your online store with some custom CSS to make the style your own.

    // TODO: Create an ajax GET request for data/inventory.json

    var url = 'data/inventory.json';
    var response = $.ajax({
        method: 'GET',
        url: 'data/inventory.json',
        dataType: 'json'
    });

    response.done(function (data, status, jqXhr) {
        console.log(data)
    });

    // TODO: Take the data from inventory.json and append it to the products table
    //       HINT: Your data should come back as a JSON object; use console.log() to inspect its contents and fields
    //       HINT: You will want to target #insertProducts for your new HTML elements

    response.done(function (data, status, jqXhr) {
        // alert("AJAX call completed successfully!");
        console.log("Request status: " + status);
        console.log("Data returned from server:");

        // console.log(data);
        // console.log(jqXhr);
        // console.log(jqXhr.statusText);

        for (var i = 0; i < data.length; i++) {
            // for (var j = 0; j < data[i].categories.length; j++) {
                // $('#insertProducts').html('<h1>Replaces entire html child</h1>');
                $('#insertProducts').append(
                    "<tr><td>" + data[i].title +
                    '</td><td>' + data[i].quantity +
                    '</td><td>' + data[i].price +
                    '</td><td><ul><li>' + data[i].categories.join('<li></li>') +
                    '</li></ul></td></tr>'
                );
            // }
        }



        // $('#refresh').on('click', function () {
        //     response.reload();
        // })

    });

    // function onSuccess(data, status, req) {
    //     $('#insertProducts').removeClass('panel-danger').addClass('panel-primary');
    //     $('#insertProducts').html(data.name);
    //     var planetreq = $.ajax(data.homeworld);
    //     planetreq.done(function (data2) {
    //         $('#home').html(
    //             "homeworld: " + data2.name
    //         );
    //     })
    //
    // }
    //
    // function onFail(req, status, error) {
    //     $('#panel1').removeClass('panel-primary').addClass('panel-danger');
    //     $('#panel1 .panel-heading').html("Error!!");
    //     $('#hair').html("These are not the droids you are looking for");
    //     $('#home').html('');
    //
    // }
    //
    // function cleanup() {
    //     $('#panel1').css('opacity', 1);
    //
    // }

    // $('#refresh').click(function(){
    //     var response = $.ajax(url);
    //     response.done().fail().always();
    //
    // })

    // $('refresh').on('click',function () {
    //
    // });

    // $('#refresh').click(function () {
    //     response = $.get(url);
    //     response.done(function (items) {
    //         $('#insertProducts').html()
    //     })
    // })



    // need server logic. node.js maybe?
    // $('#postForm').submit(function (e) {
    //     e.preventDefault();
    //
    //     var title = $('#title').val();
    //     var quantity = $('#quantity').val();
    //     var price = $('#price').val();
    //     var category = $('#category').val();
    //     var url = $(this).attr('action');
    //
    //     $.post(url, {title:title, quantity:quantity, price:price, category:category})
    //         .done(function (data) {
    //         console.log('Tool added');
    //         console.log(data);
    //     });
    // })

</script>

</body>
</html>
